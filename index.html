<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Test Telegram WebApps API</title>
   <script src="https://telegram.org/js/telegram-web-app.js"></script> <!--Подключаем скрипт от телеграм-->

   <style>
            body{
         color: var(--tg-theme-text-color);
         background: var(--tg-theme-bg-color);
         display: flex;
         flex-direction: column;
         align-items: center;
         font-size: 18px;
      }

      .hint{
         color: var(--tg-theme-hint-color);
      }

      .link{
         color: var(--tg-theme-link-color);
      }

      .button{
         background: var(--tg-theme-button-color);
         color: var(--tg-theme-button-text-color);
         border: none;
         font-size: 18px;
      }

      .button:not(:last-child){
         margin-bottom: 20px
      }

      #usercard{
         text-align: center;
      }
header {
  padding: 20px;
  background-color: #f5f5f5;
}

h1 {
  margin: 0;
}

#container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  padding: 20px;
}

.square {
  width: 200px;
  height: 200px;
  background-color: #f5f5f5;
  border-radius: 10px;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.square img {
  max-width: 100%;
  max-height: 100%;
}
   </style>
</head>

<body>
  <div id="usercard"> 
   </div>
 <h1>CoGaming</h1>
    <input type="text" id="searchInput" placeholder="Search...">
  </header>
  <div id="container"></div>
  <script src="script.js"></script>
   <p>Just text</p> 
   <a class="link" href="">Link</a> 
   <p class="hint">Some little hint</p> 
   <button id="btn" class="button">Show/Hide Main Button</button> 
   <button id="btnED" class="button">Enable/Disable Main Button</button> 
</body>

<script>
   let tg = window.Telegram.WebApp; //получаем объект webapp телеграма 

tg.expand(); //расширяем на все окно  

tg.MainButton.text = "Changed Text"; //изменяем текст кнопки 
tg.MainButton.setText("Changed Text1"); //изменяем текст кнопки иначе
tg.MainButton.textColor = "#F55353"; //изменяем цвет текста кнопки
tg.MainButton.color = "#143F6B"; //изменяем цвет бэкграунда кнопки
tg.MainButton.setParams({"color": "#143F6B"}); //так изменяются все параметры

let btn = document.getElementById("btn"); //получаем кнопку скрыть/показать 

btn.addEventListener('click', function(){ //вешаем событие на нажатие html-кнопки
   if (tg.MainButton.isVisible){ //если кнопка показана 
      tg.MainButton.hide(); //скрываем кнопку 
   }
   else{ //иначе
      tg.MainButton.show(); //показываем 
   }
});

let btnED = document.getElementById("btnED"); //получаем кнопку активировать/деактивировать
btnED.addEventListener('click', function(){ //вешаем событие на нажатие html-кнопки
   if (tg.MainButton.isActive){ //если кнопка показана 
      tg.MainButton.setParams({"color": "#E0FFFF"}); //меняем цвет
      tg.MainButton.disable(); //скрываем кнопку 
   }
   else{ //иначе
      tg.MainButton.setParams({"color": "#143F6B"}); //меняем цвет
      tg.MainButton.enable(); //показываем 
   }
});

Telegram.WebApp.onEvent('mainButtonClicked', function(){
   tg.sendData("some string that we need to send"); 
   //при клике на основную кнопку отправляем данные в строковом виде
});


let usercard = document.getElementById("usercard"); //получаем блок usercard 

if (tg.initDataUnsafe.user) {
  let profName = document.createElement('p'); //создаем параграф
  profName.innerText = `${tg.initDataUnsafe.user.first_name}
  ${tg.initDataUnsafe.user.last_name}
  ${tg.initDataUnsafe.user.username} (${tg.initDataUnsafe.user.language_code})`;
  //выдем имя, "фамилию", через тире username и код языка
  usercard.appendChild(profName); //добавляем 

  let userid = document.createElement('p'); //создаем еще параграф 
  userid.innerText = `${tg.initDataUnsafe.user.id}`; //показываем user_id
  usercard.appendChild(userid); //добавляем
}


//работает только в attachment menu
// let pic = document.createElement('img'); //создаем img
// pic.src = tg.initDataUnsafe.user.photo_url; //задаём src 
// usercard.appendChild(pic); //добавляем элемент в карточку 

const squares = [
  { title: 'Square 1', image: 'image1.jpg' },
  { title: 'Square 2', image: 'image2.jpg' },
  { title: 'Square 3', image: 'image3.jpg' },
  { title: 'Square 4', image: 'image4.jpg' },
  // Add more squares as needed
];

function createSquare(square) {
  const div = document.createElement('div');
  div.className = 'square';

  const img = document.createElement('img');
  img.src = square.image;
  img.alt = square.title;

  const title = document.createElement('h2');
  title.textContent = square.title;

  div.appendChild(img);
  div.appendChild(title);

  return div;
}

function renderSquares() {
  const container = document.getElementById('container');
  container.innerHTML = '';

  const searchInput = document.getElementById('searchInput');
  const searchText = searchInput.value.toLowerCase();

  const filteredSquares = squares.filter(square =>
    square.title.toLowerCase().includes(searchText)
  );

  let row;
  filteredSquares.forEach((square, index) => {
    if (index % 2 === 0) {
      row = document.createElement('div');
      row.className = 'row';
      container.appendChild(row);
    }

    const div = createSquare(square);
    row.appendChild(div);
  });
}

document.addEventListener('DOMContentLoaded', () => {
  const searchInput = document.getElementById('searchInput');
  searchInput.addEventListener('input', renderSquares);

  renderSquares();
});
</script>
</html>
